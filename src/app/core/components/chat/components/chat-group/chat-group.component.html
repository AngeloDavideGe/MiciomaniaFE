<div id="ChatContainer" (click)="dropdownAperta().messaggioAperto = 0">
  <div
    class="chat-header d-flex align-items-center justify-content-between p-3"
  >
    <i class="bi bi-arrow-left fs-3" (click)="chiudiChat.emit()"></i>
    <h2 class="text-center flex-grow-1">Miciomania Chat</h2>
  </div>

  @if (!spinner()) {
  <div
    #chatMessages
    class="chat-messages"
    style="overflow-y: auto; height: 500px"
  >
    @for (message of messages(); track message.id) {
    <app-messaggio
      [messageComp]="getIMessaggioComponent(message)"
      [dropdownAperta]="dropdownAperta()"
      (openDropdown)="changeDropdown($event)"
    ></app-messaggio>
    }
  </div>

  } @else {
  <div class="chat-messages">
    <div
      class="chat-spinner spinner-border text-dark rounded-circle me-3"
    ></div>
  </div>
  }

  <app-chat-input
    [idUtente]="idUtente"
    [spinner]="spinner()"
    (sendMessaggio)="sendMessaggio($event)"
  ></app-chat-input>
</div>
