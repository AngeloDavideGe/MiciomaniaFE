<app-custom-navbar
  [goHomeBotton]="'/home'"
  [filtro]="true"
  (filtroChanged)="searchQuery.set($event)"
  (searchActiveFunc)="searchActive.set($event)"
></app-custom-navbar>

<div id="ListaPosts" class="container-fluid py-5 mt-5">
  <div class="row">
    <!-- Colonna dei filtri (sempre a sinistra con posizione fissa) -->
    @if (searchActive()) {
      <div class="cerca-profili-wrapper">
        <app-cerca-profili [searchQuery]="searchQuery"></app-cerca-profili>
      </div>
    }

    <!-- Colonna dei post (centrata rispetto allo spazio rimanente) -->
    <div class="col-12 col-lg-6 mx-lg-auto">
      <div [ngClass]="searchActive() ? 'margin-posts' : ''">
        @if (postCaricati()) {
          @if (postService.newPosts.length > 0) {
            @for (post of postService.newPosts; track $index) {
              <app-card-custom
                [link]="post.profilePic"
                [descrizioneHTML]="``"
                [tipo]="'Content'"
              >
                <div
                  class="card-footer d-flex justify-content-between post-actions"
                >
                  <i class="bi bi-heart fs-5"></i>
                  <i class="bi bi-chat fs-5"></i>
                  <i class="bi bi-share fs-5"></i>
                </div>
              </app-card-custom>
            }
          } @else {
            <app-no-post></app-no-post>
          }
        } @else {
          <app-spinner [mt]="'10rem'"></app-spinner>
        }

        @if (postService.oldPosts.length > 0) {
          <div class="post-separator text-center my-4">
            <span>Post gi√† visti</span>
          </div>

          @for (post of postService.oldPosts; track $index) {
            <app-card-custom
              [link]="post.profilePic"
              [descrizioneHTML]="``"
              [tipo]="'Content'"
            >
              <div
                buttonContent
                class="card-footer d-flex justify-content-between post-actions"
              >
                <i class="bi bi-heart fs-5"></i>
                <i class="bi bi-chat fs-5"></i>
                <i class="bi bi-share fs-5"></i>
              </div>
            </app-card-custom>
          }
        }
      </div>
    </div>
  </div>
</div>
