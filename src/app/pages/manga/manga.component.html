@if (isManga$ | async) {
<!-- Chiamata riuscita -->
@if (!erroreHttp) {
<div class="text-white py-5 mb-4" style="background-color: #9fb987">
  <app-dettagli-manga
    [titolo]="'Benvenuto nel Mondo dei Manga'"
    [messaggio]="
      'Esplora i migliori manga, trova nuovi titoli e leggi le ultime novitÃ  online!'
    "
    [descrizione]="
      'Scopri opere da leggere, cerca per autore, genere o titolo.'
    "
    [bottoni]="pulsanti"
  ></app-dettagli-manga>
</div>
} @else {<app-error-http></app-error-http>}

<!-- Filters row -->
<div class="row mb-4">
  <!-- Dropdown -->
  <div class="col-md-4">
    <label for="dropdownSelect" class="form-label text-primary fw-bold"
      >Seleziona Genere</label
    >
    <select
      id="dropdownSelect"
      class="form-select bg-light border-primary"
      aria-label="Select an option"
      (change)="onGenreChange($event)"
    >
      <option selected>Qualsiasi</option>
      @for(genere of mangaGeneri; track $index){
      <option [value]="genere">
        {{ genere }}
      </option>
      }
    </select>
  </div>

  <!-- Name Input -->
  <div class="col-md-4">
    <label for="nome" class="form-label text-danger fw-bold"
      >Cerca per Nome</label
    >
    <input
      type="text"
      id="nome"
      class="form-control bg-light border-danger"
      placeholder="Cerca per Nome"
      [(ngModel)]="filterSelect.nome"
      (ngModelChange)="filterSelect.nome.set($event)"
    />
  </div>

  <!-- Author Input -->
  <div class="col-md-4">
    <label for="autore" class="form-label text-success fw-bold"
      >Cerca per Autore</label
    >
    <input
      type="text"
      id="autore"
      class="form-control bg-light border-success"
      placeholder="Cerca per Autore"
      [(ngModel)]="filterSelect.autore"
      (ngModelChange)="filterSelect.autore.set($event)"
    />
  </div>
</div>

<!-- Tabs Navigation -->
<app-tabs-manga [tabs]="tabs"></app-tabs-manga>

@if(aggiornamentoManga) {
<p>Aggiornamento manga in corso...</p>
}

<!-- Manga list display -->
<div class="mt-4 d-flex flex-wrap" style="margin-bottom: 3rem">
  @for(manga of filteredManga(); track manga.id){
  <div class="d-flex" style="padding: 0.2rem">
    <app-card-manga
      [manga]="manga"
      [preferito]="mangaPreferiti[manga.id]"
      (selezionaOpera)="mangaHandler.selezionaOpera(manga)"
    ></app-card-manga>
  </div>
  }
</div>
}

<router-outlet></router-outlet>
